
@startuml diagrama_casos_uso
title Diagrama de Casos de Uso - Usuario (Frontend)
left to right direction
skinparam usecase {
	BackgroundColor<<Rutas>> LightBlue
	BorderColor <<Rutas>> #2B6CB0
	BackgroundColor<<Optimizacion>> #FEF3C7
	BorderColor <<Optimizacion>> #D97706
	BackgroundColor<<Animacion>> #ECFDF5
	BorderColor <<Animacion>> #10B981
	BackgroundColor<<IA>> #F5F3FF
	BorderColor <<IA>> #7C3AED
	BackgroundColor<<Exportar>> #FFF7ED
	BorderColor <<Exportar>> #FB923C
}

actor "Usuario" as User

' Agrupar casos de uso por áreas funcionales
package "Rutas" {
	usecase "1. Ver lista de rutas" as UC_ListRutas <<Rutas>>
	usecase "2. Seleccionar ruta" as UC_SelectRuta <<Rutas>>
	usecase "3. Ver detalles de ruta (paradas, horarios)" as UC_VerDetalles <<Rutas>>
	usecase "4. Centrar mapa en parada/ruta" as UC_CentrarMapa <<Rutas>>
}

package "Optimización" {
	usecase "5. Configurar parámetros del algoritmo" as UC_ConfigParams <<Optimizacion>>
	usecase "6. Iniciar optimización de ruta" as UC_IniciarOpt <<Optimizacion>>
	usecase "7. Ver progreso de optimización" as UC_VerProgreso <<Optimizacion>>
	usecase "8. Ver resultados optimizados" as UC_VerResultados <<Optimizacion>>
}

package "Animación" {
	usecase "9. Animar recorrido optimizado" as UC_Animar <<Animacion>>
	usecase "10. Controlar reproducción (play/pause/stop)" as UC_Control <<Animacion>>
	usecase "11. Ajustar velocidad de animación" as UC_Velocidad <<Animacion>>
}

package "Análisis con IA" {
	usecase "12. Solicitar análisis automático (IA)" as UC_SolicitarIA <<IA>>
	usecase "13. Ver análisis en modal" as UC_VerIA <<IA>>
}

package "Exportar / Compartir" {
	usecase "14. Descargar análisis (Markdown)" as UC_Download <<Exportar>>
	usecase "15. Copiar análisis al portapapeles" as UC_Copy <<Exportar>>
	usecase "16. Exportar ruta / polilínea" as UC_ExportRuta <<Exportar>>
}

' Relaciones actor -> casos de uso (acciones del usuario)
User --> UC_ListRutas

' Flujo secuencial (orden de uso típico)
UC_ListRutas --> UC_SelectRuta
UC_SelectRuta --> UC_VerDetalles
UC_VerDetalles --> UC_CentrarMapa
UC_VerDetalles --> UC_ConfigParams
UC_ConfigParams --> UC_IniciarOpt
UC_IniciarOpt --> UC_VerProgreso
UC_VerProgreso --> UC_VerResultados
UC_VerResultados --> UC_Animar
UC_Animar --> UC_Control
UC_Control --> UC_Velocidad

' Después de ver resultados: opcional solicitar IA o exportar
UC_VerResults_OptionalStart = UC_VerResultados
UC_VerResults_OptionalStart --> UC_SolicitarIA
UC_SolicitarIA --> UC_VerIA
UC_VerIA --> UC_Download
UC_VerIA --> UC_Copy
UC_VerResultados --> UC_ExportRuta

' Conexiones del actor a las acciones principales (acceso directo)
User --> UC_SelectRuta
User --> UC_ConfigParams
User --> UC_IniciarOpt
User --> UC_Animar
User --> UC_SolicitarIA
User --> UC_Download
User --> UC_ExportRuta

' Notas de ayuda para aclarar acciones (no técnicas)
note right of UC_IniciarOpt
	El usuario selecciona una ruta y pulsa "Optimizar".
	Puede ajustar parámetros (población, generaciones, tasas).
end note

note right of UC_Animar
	La animación muestra el recorrido optimizado sobre el mapa
	con una línea destacada y controles de reproducción.
end note

note left of UC_SolicitarIA
	El análisis con IA devuelve un informe en Markdown
	y se muestra en un modal con opciones de copia/descarga.
end note

@enduml

